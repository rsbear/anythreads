---
// Breadcrumb.astro
---

<nav aria-label="Breadcrumb" class="breadcrumb">
  <ol id="breadcrumb-list"></ol>
</nav>

<script>
  const list = document.getElementById('breadcrumb-list');
  if (list) {
    const path = window.location.pathname;
    const segments = path.split('/').filter(Boolean);
    
    // Replace 'md' with '~' if it's the first segment
    if (segments[0] === 'md') {
      segments[0] = '~';
    }
    
    segments.forEach((segment, index) => {
      const li = document.createElement('li');
      
      if (index < segments.length - 1) {
        // Create link for all segments except the last
        const a = document.createElement('a');
        
        // Build the href, converting '~' back to 'md' for the actual link
        const pathSegments = segments.slice(0, index + 1).map((s, i) => 
          i === 0 && s === '~' ? 'md' : s
        );
        a.href = '/' + pathSegments.join('/');
        a.textContent = segment;
        li.appendChild(a);
      } else {
        // Last segment is just text
        li.textContent = segment;
        li.setAttribute('aria-current', 'page');
      }
      
      list.appendChild(li);
    });
  }
</script>

<style>
  .breadcrumb ol {
    display: flex;
    gap: 0.5rem;
    list-style: none;
    padding: 0;
    margin: 0;
    flex-wrap: wrap;
  }
  
  .breadcrumb li:not(:last-child)::after {
    content: '/';
    margin-left: 0.5rem;
    color: #666;
  }
  
  .breadcrumb a {
    color: #0066cc;
    text-decoration: none;
  }
  
  .breadcrumb a:hover {
    text-decoration: underline;
  }
  
  .breadcrumb li[aria-current="page"] {
    color: #333;
    font-weight: 500;
  }
</style>
